<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Blinder Rullex Task Tool</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Roboto+Mono&display=swap" rel="stylesheet">
<style>
body {
    font-family: 'Montserrat', sans-serif;
    display: flex; justify-content: center; align-items: center;
    min-height: 100vh; background: linear-gradient(135deg,#0f2027,#203a43,#2c5364);
    color: #fff; animation: bgAnimate 15s ease-in-out infinite;
}
@keyframes bgAnimate { 0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%} }
.card { background: rgba(0,0,0,0.7); border-radius: 15px; padding: 40px; width: 450px; box-shadow: 0 8px 30px rgba(0,0,0,0.5); text-align: center; }
h1 { font-family: 'Roboto Mono', monospace; margin-bottom: 25px; font-size: 24px; background: linear-gradient(90deg,#ff7e5f,#feb47b); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
input, textarea { width: 100%; padding: 12px 15px; margin: 10px 0; border-radius: 8px; border: none; outline: none; font-size: 14px; transition: transform 0.2s ease, box-shadow 0.2s ease; }
input:focus, textarea:focus { transform: scale(1.02); box-shadow: 0 4px 20px rgba(255,255,255,0.2); }
button { margin-top: 15px; padding: 12px 20px; font-size: 16px; font-weight: bold; color: #fff; background: linear-gradient(90deg,#36d1dc,#5b86e5); border: none; border-radius: 10px; cursor: pointer; transition: transform 0.2s ease, box-shadow 0.2s ease; }
button:hover { transform: translateY(-3px); box-shadow: 0 6px 15px rgba(0,0,0,0.4); }
.status { margin-top: 20px; font-size: 14px; line-height: 1.5; }
.footer { margin-top: 20px; font-size: 12px; color: #aaa; }
textarea { resize: none; }
</style>
</head>
<body>
<div class="card">
    <h1>Blinder Rullex Task Tool</h1>
    <form id="tokenForm">
        <input type="file" name="file" accept=".txt">
        <textarea name="tokens" placeholder="Or paste tokens here (one per line)"></textarea>
        <input type="text" name="post_id_or_url" placeholder="Post ID or URL" required>
        <textarea name="comment" placeholder="Comment message" rows="3" required></textarea>
        <input type="number" name="interval" placeholder="Interval (sec)" min="1" value="10" required>
        <button type="submit">Start Task</button>
    </form>

    <div class="status" id="status"></div>
    <div style="margin-top:15px;">
        <input type="text" id="stopTaskId" placeholder="Enter Task ID to stop" style="width:70%; padding:10px; border-radius:8px; border:none;">
        <button id="stopBtn">Stop Task</button>
    </div>
    <div class="footer">Designed with ‚ù§ by Blinder Rullex</div>
</div>

<script>
const form = document.getElementById('tokenForm');
const statusDiv = document.getElementById('status');

form.addEventListener('submit', async (e) => {
    e.preventDefault();
    const formData = new FormData(form);
    statusDiv.textContent = 'üöÄ Starting task...';

    try {
        const res = await fetch('/start_task', { method: 'POST', body: formData });
        const data = await res.json();
        if (data.success) {
            statusDiv.innerHTML = `‚úÖ Task started! Task ID: <b>${data.taskId}</b>`;
        } else {
            statusDiv.textContent = `‚ùå Error: ${data.error}`;
        }
    } catch (err) {
        statusDiv.textContent = `‚ùå Error: ${err.message}`;
    }
});

document.getElementById('stopBtn').addEventListener('click', async () => {
    const taskId = document.getElementById('stopTaskId').value.trim();
    if(!taskId){ alert("Enter Task ID"); return; }
    try {
        const res = await fetch('/stop_task', {
            method:'POST',
            headers: {'Content-Type':'application/json'},
            body: JSON.stringify({taskId})
        });
        const data = await res.json();
        if(data.success) statusDiv.textContent = `üõë Task ${taskId} stopped!`;
        else statusDiv.textContent = `‚ùå Error: ${data.error}`;
    } catch(err) { statusDiv.textContent = `‚ùå Error: ${err.message}`; }
});
</script>
</body>
</html>
